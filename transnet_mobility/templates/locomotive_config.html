{% extends 'base.html' %}

{% block title %}Locomotive Specifications{% endblock %}
{% block content %}
<style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .builder, .survey { margin-top: 20px; padding: 15px; border: 1px solid #ccc; border-radius: 8px; }
    .question { margin: 10px 0; }
    label { display: block; margin-bottom: 5px; }
    input, select, button, textarea { margin: 5px 0; }
  </style>
        <!-- Main Content -->
        <div class=" p-4">
          <div class="card">
            <div class="card-header">
              <h5 class="mb-4 text-center">Locomotive Specifications</h5>
            </div>
            <div class="card-body">
                <!-- Flash Messages -->
{% if messages %}
  <div class="container mt-3">
    {% for message in messages %}
      <div class="alert 
        {% if message.tags %}alert-{{ message.tags }}{% else %}alert-info{% endif %} 
        alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  </div>
{% endif %}

              <!-- Search Section -->
              <div class="filter-section">
                <div class="row align-items-center">
                  <div class="col-md-6">
                    <div class="input-group">
                      <select class="form-select" name="locomotive" required>
                        <option value="" selected disabled>
                          Select locomotive...
                        </option>
                        <option value="GE_ES44AC">
                          GE ES44AC (Eagle Series)
                        </option>
                        <option value="EMD_SD70ACe">
                          EMD SD70ACe (Evolution Series)
                        </option>
                        <option value="Siemens_Charger">
                          Siemens Charger SC-44
                        </option>
                        <option value="ALCO_Century">ALCO Century 424</option>
                        <option value="GE_AC6000CW">GE AC6000CW</option>
                        <option value="EMD_GP40">EMD GP40-2</option>
                        <option value="Bombardier_TRAXX">
                          Bombardier TRAXX F140
                        </option>
                        <option value="GE_Dash9">GE Dash 9-44CW</option>
                        <option value="EMD_F59PH">EMD F59PH</option>
                        <option value="Siemens_Vectron">
                          Siemens Vectron MS
                        </option>
                      </select>
                      <button class="btn btn-primary" type="button">
                        Select
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Form Section -->
              <div class="form-box">
                <form>
                  <div class="form-group-row">
                    <label>Type</label>
                    <input
                      type="text"
                      class="form-control"
                      placeholder="type"
                    />
                  </div>
                  <div class="form-group-row">
                    <label>Class</label>
                    <input
                      type="text"
                      class="form-control"
                      placeholder="class"
                    />
                  </div>
                  <div class="form-group-row">
                    <label>Engine Supply</label>
                    <input
                      type="text"
                      class="form-control"
                      placeholder="engine supply"
                    />
                  </div>
                  <div class="form-group-row">
                    <label>Length</label>
                    <input
                      type="text"
                      class="form-control"
                      placeholder="length"
                    />
                  </div>
                  <div class="form-group-row">
                    <label>Capacity In Tons</label>
                    <input
                      type="text"
                      class="form-control"
                      placeholder="capacity in tons"
                    />
                  </div>
                  <div class="form-group-row">
                    <label>Distributed Power</label>
                    <input
                      type="text"
                      class="form-control"
                      placeholder="distributed power"
                    />
                  </div>
                  <div class="form-group-row">
                    <label>Tractive Efford</label>
                    <input
                      type="text"
                      class="form-control"
                      placeholder="tractive efford"
                    />
                  </div>
                  <div class="form-group-row">
                    <label>Truck Circuit Spec</label>
                    <input
                      type="text"
                      class="form-control"
                      placeholder="track circuit spec"
                    />
                  </div>

                  <!-- Buttons -->
                  <div class="d-flex justify-content-end gap-2 mt-4">
                    <button type="reset" class="btn btn-outline-dark">
                      cancel
                    </button>
                    <button type="submit" class="btn btn-dark">submit</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Question Builder -->
  <div class="builder p-4 m-4">
    <h2>Add Section</h2>
    <label>Question Text:
      <input class="form-control" type="text" id="questionText">
    </label>
    <label>Question Type:
      <select class="form-select" id="questionType">
        <option value="text">Short Text</option>
        <option value="textarea">Long Text</option>
        <option value="radio">Multiple Choice (Single)</option>
        <option value="checkbox">Multiple Choice (Multiple)</option>
        <option value="dropdown">Dropdown</option>
      </select>
    </label>
    <label>Options (comma separated, for radio/checkbox/dropdown):
      <input class="form-control" type="text" id="options">
    </label>
    <button class="btn btn-outline-dark" onclick="addQuestion()">Add Question</button>
  </div>

  <!-- Survey Display -->
  <div class="survey p-4 m-4">
    <h2>Survey</h2>
    <form id="surveyForm"></form>
    <button type="submit" class="btn btn-outline-dark" form="surveyForm">Submit</button>
  </div>

 <script>
    let surveyForm = document.getElementById("surveyForm");

    function addQuestion() {
      const text = document.getElementById("questionText").value.trim();
      const type = document.getElementById("questionType").value;
      const options = document.getElementById("options").value.split(",").map(o => o.trim()).filter(o => o);

      if (!text) {
        alert("Please enter a question text");
        return;
      }

      let wrapper = document.createElement("div");
      wrapper.classList.add("question");

      let label = document.createElement("label");
      label.textContent = text;
      wrapper.appendChild(label);

      // Different input types
      if (type === "text") {
        wrapper.appendChild(document.createElement("input"));
      } 
      else if (type === "textarea") {
        wrapper.appendChild(document.createElement("textarea"));
      } 
      else if (type === "radio") {
        options.forEach(opt => {
          let radio = document.createElement("input");
          radio.type = "radio";
          radio.name = text; // group by question
          radio.value = opt;
          wrapper.appendChild(radio);
          wrapper.appendChild(document.createTextNode(opt));
          wrapper.appendChild(document.createElement("br"));
        });
      } 
      else if (type === "checkbox") {
        options.forEach(opt => {
          let checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.name = text;
          checkbox.value = opt;
          wrapper.appendChild(checkbox);
          wrapper.appendChild(document.createTextNode(opt));
          wrapper.appendChild(document.createElement("br"));
        });
      } 
      else if (type === "dropdown") {
        let select = document.createElement("select");
        options.forEach(opt => {
          let option = document.createElement("option");
          option.value = opt;
          option.textContent = opt;
          select.appendChild(option);
        });
        wrapper.appendChild(select);
      }

      surveyForm.appendChild(wrapper);

      // Reset builder form
      document.getElementById("questionText").value = "";
      document.getElementById("options").value = "";
    }
  </script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Optional Bootstrap icons if you use <i> tags -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />
    {% endblock %}
